{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ADMIN/Desktop/BeatAware/beataware/src/app/dashboard/appointments/MapClient.tsx"],"sourcesContent":["// MapClient.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\n// Fix default marker icons (Leaflet CDN icons)\r\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png\",\r\n  iconUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png\",\r\n  shadowUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png\",\r\n});\r\n\r\nexport default function MapClient() {\r\n  const [userLocation, setUserLocation] = useState<[number, number] | null>(null);\r\n  const [hospitals, setHospitals] = useState<Array<{ name: string; lat: number; lng: number }>>(\r\n    []\r\n  );\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (\"geolocation\" in navigator) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (pos) => {\r\n          const { latitude, longitude } = pos.coords;\r\n          setUserLocation([latitude, longitude]);\r\n\r\n          setHospitals([\r\n            { name: \"City Hospital\", lat: latitude + 0.005, lng: longitude + 0.005 },\r\n            { name: \"Health Plus Clinic\", lat: latitude - 0.004, lng: longitude - 0.006 },\r\n            { name: \"General Care Hospital\", lat: latitude + 0.007, lng: longitude - 0.003 },\r\n          ]);\r\n        },\r\n        () => {\r\n          setError(\"Could not get your location. Showing default hospitals.\");\r\n          setUserLocation([19.076, 72.8777]); // fallback\r\n          setHospitals([\r\n            { name: \"City Hospital\", lat: 19.08, lng: 72.88 },\r\n            { name: \"Health Plus Clinic\", lat: 19.07, lng: 72.89 },\r\n          ]);\r\n        }\r\n      );\r\n    } else {\r\n      setError(\"Geolocation is not supported by your browser.\");\r\n      setUserLocation([19.076, 72.8777]);\r\n      setHospitals([\r\n        { name: \"City Hospital\", lat: 19.08, lng: 72.88 },\r\n        { name: \"Health Plus Clinic\", lat: 19.07, lng: 72.89 },\r\n      ]);\r\n    }\r\n  }, []);\r\n\r\n  const RecenterMap = ({ center }: { center: [number, number] }) => {\r\n    const map = useMap();\r\n    useEffect(() => {\r\n      if (center) map.setView(center, 14);\r\n    }, [center, map]);\r\n    return null;\r\n  };\r\n\r\n  const getGoogleMapsDirections = (lat: number, lng: number) => {\r\n    if (!userLocation) return `https://www.google.com/maps?q=${lat},${lng}`;\r\n    const [uLat, uLng] = userLocation;\r\n    return `https://www.google.com/maps/dir/${uLat},${uLng}/${lat},${lng}`;\r\n  };\r\n\r\n  const copyToClipboard = async (text: string) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      alert(\"Coordinates copied to clipboard\");\r\n    } catch (err) {\r\n      console.error(\"Clipboard copy failed\", err);\r\n    }\r\n  };\r\n\r\n  if (!userLocation) {\r\n    return <div className=\"h-80 flex items-center justify-center text-black\">Loading map…</div>;\r\n  }\r\n\r\n  return (\r\n    <MapContainer center={userLocation} zoom={14} className=\"w-full h-80 rounded border\">\r\n      <RecenterMap center={userLocation} />\r\n      <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n\r\n      <Marker position={userLocation}>\r\n        <Popup>\r\n          <div className=\"min-w-[220px] max-w-sm\">\r\n            <div className=\"text-sm font-semibold\">Your Location</div>\r\n            <div className=\"text-xs text-slate-600\">\r\n              {userLocation[0].toFixed(5)}, {userLocation[1].toFixed(5)}\r\n            </div>\r\n\r\n            <div className=\"mt-3 flex gap-2\">\r\n              <a\r\n                href={getGoogleMapsDirections(userLocation[0], userLocation[1])}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"flex-1 inline-flex items-center justify-center rounded-md bg-gradient-to-r from-blue-600 to-purple-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:opacity-95\"\r\n              >\r\n                Open in Maps\r\n              </a>\r\n\r\n              <button\r\n                onClick={() => copyToClipboard(`${userLocation[0]}, ${userLocation[1]}`)}\r\n                className=\"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm font-medium text-slate-700\"\r\n              >\r\n                Copy\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </Popup>\r\n      </Marker>\r\n\r\n      {hospitals.map((hosp, idx) => (\r\n        <Marker key={idx} position={[hosp.lat, hosp.lng]}>\r\n          <Popup className=\"!p-0\">\r\n            <div className=\"min-w-[240px] max-w-xs rounded-lg bg-white shadow-lg ring-1 ring-slate-100\">\r\n              <div className=\"flex items-center justify-between px-4 py-3 border-b\">\r\n                <div className=\"text-sm font-semibold text-slate-800\">{hosp.name}</div>\r\n                <button\r\n                  onClick={(e) => {\r\n                    const popupEl = (e.target as HTMLElement).closest(\".leaflet-popup\");\r\n                    popupEl?.querySelector(\".leaflet-popup-close-button\")?.dispatchEvent(new Event(\"click\"));\r\n                  }}\r\n                  className=\"text-slate-400 hover:text-slate-600\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  ✕\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"px-4 py-3\">\r\n                <div className=\"text-xs text-slate-500 mb-2\">Coordinates</div>\r\n                <div className=\"text-sm font-medium text-slate-800\">Lat: {hosp.lat.toFixed(5)}</div>\r\n                <div className=\"text-sm font-medium text-slate-800 mb-3\">Lng: {hosp.lng.toFixed(5)}</div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  <a\r\n                    href={getGoogleMapsDirections(hosp.lat, hosp.lng)}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"flex-1 inline-flex items-center justify-center rounded-md bg-gradient-to-r from-blue-600 to-purple-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:opacity-95\"\r\n                  >\r\n                    Get Directions\r\n                  </a>\r\n\r\n                  <button\r\n                    onClick={() => copyToClipboard(`${hosp.lat}, ${hosp.lng}`)}\r\n                    className=\"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm font-medium text-slate-700\"\r\n                  >\r\n                    Copy\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"px-4 py-2 border-t text-xs text-slate-500\">Opens Google Maps</div>\r\n            </div>\r\n          </Popup>\r\n        </Marker>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}